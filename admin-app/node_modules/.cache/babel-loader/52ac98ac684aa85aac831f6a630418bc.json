{"ast":null,"code":"import { categoryConstants } from \"../actions/constants\";\nconst initState = {\n  categories: [],\n  loading: false,\n  error: null\n}; //This function refresh the page with newly added category.\n// This function call in 34 th line in this file\n\nconst buildNewCategories = (id, categories, category) => {\n  let myCategories = [];\n\n  for (let cat of categories) {\n    if (cat.parentId && cat.parentId == id) {\n      myCategories.push({ ...cat,\n        children: cat.children && cat.children.length > 0 ? buildNewCategories(id, [...cat.children, {\n          _id: category._id,\n          name: category.name,\n          slug: category.slug,\n          parentId: category.parentId,\n          children: category.children\n        }], category) : []\n      });\n    } else {\n      myCategories.push({ ...cat,\n        children: cat.children && cat.children.length > 0 ? buildNewCategories(id, cat.children, category) : []\n      });\n    }\n  }\n\n  return myCategories;\n};\n\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case categoryConstants.GET_ALL_CATEGORY_SUCCESS:\n      state = { ...state,\n        categories: action.payload.categories\n      };\n      break;\n\n    case categoryConstants.ADD_NEW_CATEGORY_REQUEST:\n      state = { ...state,\n        loading: true\n      };\n      break;\n\n    case categoryConstants.ADD_NEW_CATEGORY_SUCCESS:\n      state = { ...state,\n        categories: buildNewCategories(state.categories.action.payload.categ),\n        loading: false\n      };\n      break;\n\n    case categoryConstants.ADD_NEW_CATEGORY_FAILURE:\n      state = { ...initState\n      };\n      break;\n  }\n\n  return state;\n});","map":{"version":3,"sources":["C:/Users/Praveen Kariyawasam/Documents/Projects/E-Commerce - Project/mern-ecommerce/admin-app/src/reducers/category.reducer.js"],"names":["categoryConstants","initState","categories","loading","error","buildNewCategories","id","category","myCategories","cat","parentId","push","children","length","_id","name","slug","state","action","type","GET_ALL_CATEGORY_SUCCESS","payload","ADD_NEW_CATEGORY_REQUEST","ADD_NEW_CATEGORY_SUCCESS","categ","ADD_NEW_CATEGORY_FAILURE"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,sBAAlC;AAEA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,UAAU,EAAE,EADI;AAEhBC,EAAAA,OAAO,EAAE,KAFO;AAGhBC,EAAAA,KAAK,EAAE;AAHS,CAAlB,C,CAMA;AACA;;AACA,MAAMC,kBAAkB,GAAE,CAACC,EAAD,EAAIJ,UAAJ,EAAgBK,QAAhB,KAA6B;AAErD,MAAIC,YAAY,GAAG,EAAnB;;AAEA,OAAI,IAAIC,GAAR,IAAeP,UAAf,EAA0B;AAExB,QAAGO,GAAG,CAACC,QAAJ,IAAgBD,GAAG,CAACC,QAAJ,IAAgBJ,EAAnC,EAAsC;AACpCE,MAAAA,YAAY,CAACG,IAAb,CAAkB,EAChB,GAAGF,GADa;AAEhBG,QAAAA,QAAQ,EAAEH,GAAG,CAACG,QAAJ,IAAgBH,GAAG,CAACG,QAAJ,CAAaC,MAAb,GAAuB,CAAvC,GAA2CR,kBAAkB,CAACC,EAAD,EAAI,CAAC,GAAGG,GAAG,CAACG,QAAR,EAAkB;AAC3FE,UAAAA,GAAG,EAAEP,QAAQ,CAACO,GAD6E;AAE3FC,UAAAA,IAAI,EAAER,QAAQ,CAACQ,IAF4E;AAG3FC,UAAAA,IAAI,EAAET,QAAQ,CAACS,IAH4E;AAI3FN,UAAAA,QAAQ,EAAEH,QAAQ,CAACG,QAJwE;AAK3FE,UAAAA,QAAQ,EAAEL,QAAQ,CAACK;AALwE,SAAlB,CAAJ,EAMpEL,QANoE,CAA7D,GAMK;AARC,OAAlB;AAWD,KAZD,MAYK;AACHC,MAAAA,YAAY,CAACG,IAAb,CAAkB,EAChB,GAAGF,GADa;AAEhBG,QAAAA,QAAQ,EAAEH,GAAG,CAACG,QAAJ,IAAgBH,GAAG,CAACG,QAAJ,CAAaC,MAAb,GAAuB,CAAvC,GAA2CR,kBAAkB,CAACC,EAAD,EAAIG,GAAG,CAACG,QAAR,EAAiBL,QAAjB,CAA7D,GAA0F;AAFpF,OAAlB;AAID;AACF;;AACD,SAAOC,YAAP;AACD,CA1BD;;AA4BA,gBAAe,YAA+B;AAAA,MAA9BS,KAA8B,uEAAtBhB,SAAsB;AAAA,MAAXiB,MAAW;;AAC5C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKnB,iBAAiB,CAACoB,wBAAvB;AACEH,MAAAA,KAAK,GAAG,EACN,GAAGA,KADG;AAENf,QAAAA,UAAU,EAAEgB,MAAM,CAACG,OAAP,CAAenB;AAFrB,OAAR;AAIA;;AAEF,SAAKF,iBAAiB,CAACsB,wBAAvB;AACEL,MAAAA,KAAK,GAAG,EACN,GAAGA,KADG;AAENd,QAAAA,OAAO,EAAC;AAFF,OAAR;AAIA;;AAEF,SAAKH,iBAAiB,CAACuB,wBAAvB;AACEN,MAAAA,KAAK,GAAG,EACN,GAAGA,KADG;AAENf,QAAAA,UAAU,EAAEG,kBAAkB,CAACY,KAAK,CAACf,UAAN,CAAiBgB,MAAjB,CAAwBG,OAAxB,CAAgCG,KAAjC,CAFxB;AAGNrB,QAAAA,OAAO,EAAC;AAHF,OAAR;AAKA;;AAEF,SAAKH,iBAAiB,CAACyB,wBAAvB;AACER,MAAAA,KAAK,GAAG,EACN,GAAGhB;AADG,OAAR;AAGA;AA3BJ;;AA8BA,SAAOgB,KAAP;AACD,CAhCD","sourcesContent":["import { categoryConstants } from \"../actions/constants\";\r\n\r\nconst initState = {\r\n  categories: [],\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\n//This function refresh the page with newly added category.\r\n// This function call in 34 th line in this file\r\nconst buildNewCategories =(id,categories, category) => {\r\n\r\n  let myCategories = [];\r\n\r\n  for(let cat of categories){\r\n\r\n    if(cat.parentId && cat.parentId == id){\r\n      myCategories.push({\r\n        ...cat,\r\n        children: cat.children && cat.children.length  > 0 ? buildNewCategories(id,[...cat.children, {\r\n          _id: category._id,\r\n          name: category.name,\r\n          slug: category.slug,\r\n          parentId: category.parentId,\r\n          children: category.children\r\n        }],category) : []\r\n      });\r\n\r\n    }else{\r\n      myCategories.push({\r\n        ...cat,\r\n        children: cat.children && cat.children.length  > 0 ? buildNewCategories(id,cat.children,category) : []\r\n      });\r\n    }\r\n  }\r\n  return myCategories;\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  switch (action.type) {\r\n    case categoryConstants.GET_ALL_CATEGORY_SUCCESS:\r\n      state = {\r\n        ...state,\r\n        categories: action.payload.categories,\r\n      };\r\n      break;\r\n\r\n    case categoryConstants.ADD_NEW_CATEGORY_REQUEST:\r\n      state = {\r\n        ...state,\r\n        loading:true\r\n      };\r\n      break;\r\n\r\n    case categoryConstants.ADD_NEW_CATEGORY_SUCCESS:\r\n      state = {\r\n        ...state,\r\n        categories: buildNewCategories(state.categories.action.payload.categ),\r\n        loading:false\r\n      };\r\n      break;\r\n\r\n    case categoryConstants.ADD_NEW_CATEGORY_FAILURE:\r\n      state = {\r\n        ...initState,\r\n      };\r\n      break;\r\n  }\r\n\r\n  return state;\r\n};\r\n "]},"metadata":{},"sourceType":"module"}